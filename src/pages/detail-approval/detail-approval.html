<!--
  Generated template for the DetailTicketPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="title-centered">

  <ion-navbar>
	<ion-title>Ticket Detail</ion-title>
  </ion-navbar>

</ion-header>



<ion-content class="cards-bg">

  	<ion-card class="cards-list-demo">
      <ion-card-header>
      Ticket Detail  {{idTicket}}
      </ion-card-header>
        <!-- https://stackoverflow.com/questions/42057594/ionic-2-cannot-read-object-property-in-view -->
    </ion-card>

    <ion-list>
        <ion-row>
          <ion-col col-3>
            <div><span>Category</span> </div>
          </ion-col>
          <ion-col col-1>
            <div><span>:</span></div>
          </ion-col>
          <ion-col>
            <div><span>{{detailTicket?.category}}</span></div>
          </ion-col>
        </ion-row>
    
        <ion-row>
          <ion-col col-3>
            <div></div>
          </ion-col>
          <ion-col col-1>
            <div></div>
          </ion-col>
          <ion-col>
            <div><span>{{detailTicket?.sub_category}}</span></div>
          </ion-col>
        </ion-row>
    
        <ion-row>
          <ion-col col-3>
            <div></div>
          </ion-col>
          <ion-col col-1>
            <div></div>
          </ion-col>
          <ion-col>
            <div><span>{{detailTicket?.sub_sub_category}}</span></div>
          </ion-col>
        </ion-row>
    
        <ion-row>
          <ion-col col-3>
            <div></div>
          </ion-col>
          <ion-col col-1>
            <div></div>
          </ion-col>
          <ion-col>
            <div><span>{{detailTicket?.sub_sub_sub_category}}</span></div>
          </ion-col>
        </ion-row>
    
        <ion-row>
          <ion-col col-3>
            <div><span>Description</span></div>
          </ion-col>
          <ion-col col-1>
            <div><span>:</span></div>
          </ion-col>
          <ion-col>
              <div><span>{{detailTicket?.description}}</span></div>
            </ion-col>
        </ion-row>

        <div *ngFor="let flexible of flexibleInput">
            <ion-row>
              <ion-col col-3>
                <div><span>{{flexible?.label_name}}</span></div>
              </ion-col>
              <ion-col col-1>
                <div><span>:</span></div>
              </ion-col>
              <ion-col>
                  <div><span>{{flexible?.content}}</span></div>
                </ion-col>
            </ion-row>
        </div>
      </ion-list>

      <ion-card class="cards-list-demo">
          <ion-card-header>
            Approval List
          </ion-card-header>
        </ion-card>
      
        <ion-list>
          <ion-item *ngIf="detailApproval?.length === 0">
            <ion-avatar item-start>
              <img src="./assets/imgs/waiting.png">
            </ion-avatar>
            <span>Waiting Approval</span>
          </ion-item>
      
          <ion-item *ngFor="let approval of detailApproval" >
            <ion-avatar item-start>
              <img src="./assets/imgs/users.png">
            </ion-avatar>
            <h3>{{approval?.response_by}}</h3>
            <p>Created at: {{approval?.response_time}}</p>
            <p>Status : {{approval?.code}}</p>
            <p *ngIf="approval?.response_description !== null">Desc : {{approval?.response_description}}</p>
          </ion-item>
        </ion-list>

      <ion-card class="cards-list-demo">
          <ion-card-header>
            Response Approval
          </ion-card-header>
      </ion-card>

    <ion-list class="form-approval">
      <form [formGroup]="form" (ngSubmit)="saveTicket(form)">
          <ion-input type="hidden" formControlName="ticketID"></ion-input>
        <ion-item>
            <ion-label color="primary" stacked>Persetujuan :</ion-label>
            <ion-select interface="action-sheet" formControlName="optResponse">
              <ion-option value="" selected="true">-- Silahkan pilih --</ion-option>
              <ion-option value="APTI">Approve Ticket</ion-option>
              <ion-option value="EXAP">Cancel Ticket</ion-option>
              <ion-option value="RETI">Reject Ticket</ion-option>
            </ion-select>
        </ion-item>
        <ion-item *ngIf="isFieldValid('optResponse')" no-lines [ngClass]="displayFieldCss('optResponse')">
						<p>Please select Persetujuan</p> 
				</ion-item>

        <ion-item>
          <ion-label color="primary" stacked>Note :</ion-label>
          <ion-textarea formControlName="inputDescription"></ion-textarea>
        </ion-item>
        <ion-item class="button-item">
              <button ion-button block color="primary-button">
              Save
              </button>
          </ion-item>
      </form>
    </ion-list>
    
</ion-content>
